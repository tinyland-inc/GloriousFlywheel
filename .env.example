# Bates Attic Cache - Local Development Secrets
# Copy to .env and fill in actual values
#
# This file is loaded automatically by direnv (.envrc has dotenv_if_exists)
# DO NOT COMMIT .env - it is gitignored and contains secrets
#
# Most CI/CD values are configured via GitLab CI/CD variables.
# This file is for local development only.

# =============================================================================
# GitLab Authentication (Required for OpenTofu)
# =============================================================================
# Personal Access Token (PAT) for GitLab HTTP backend and API access
# Get your token from: https://gitlab.com/-/user_settings/personal_access_tokens
# Required scopes: api, read_repository, write_repository
#
# This is used for:
#   - OpenTofu HTTP state backend (GitLab project state storage)
#   - GitLab API operations (runners, pipelines, etc.)
#
TF_HTTP_PASSWORD=glpat-your-token-here

# =============================================================================
# GitLab Kubernetes Agent Context
# =============================================================================
# beehive (dev/review): bates-ils/projects/kubernetes/gitlab-agents:beehive
# rigel (staging/prod): bates-ils/projects/kubernetes/gitlab-agents:rigel
KUBE_CONTEXT=bates-ils/projects/kubernetes/gitlab-agents:beehive

# =============================================================================
# Namespace Configuration
# =============================================================================
NAMESPACE=attic-cache
KUBE_INGRESS_BASE_DOMAIN=beehive.bates.edu

# =============================================================================
# Attic Configuration (auth-free mode)
# =============================================================================
ATTIC_SERVER=https://attic-cache.beehive.bates.edu
ATTIC_CACHE=main

# =============================================================================
# S3 Backend (NOT REQUIRED when using MinIO - which is the default)
# =============================================================================
# MinIO (use_minio=true) is the default and provides S3-compatible storage.
# These variables are ONLY required when use_minio=false (external S3).
#
# For CI/CD, set these as masked variables in GitLab:
#   S3_ENDPOINT           - S3 endpoint URL
#   S3_ACCESS_KEY_ID      - S3 access key (masked)
#   S3_SECRET_ACCESS_KEY  - S3 secret key (masked)
#   S3_BUCKET_NAME        - S3 bucket name
#
# For local testing without MinIO:
# S3_ENDPOINT=https://s3.example.com
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=
# S3_BUCKET_NAME=attic-cache

# =============================================================================
# MinIO Configuration (when use_minio=true)
# =============================================================================
# MinIO credentials are auto-generated by OpenTofu if not provided.
# These are only needed for manual MinIO administration.
# MINIO_ROOT_USER=minioadmin
# MINIO_ROOT_PASSWORD=

# =============================================================================
# Database (Optional - CNPG generates URL automatically)
# =============================================================================
# When use_cnpg_postgres=true (default), CloudNativePG manages the database.
# Only set this for external PostgreSQL (e.g., Neon):
# DATABASE_URL=postgresql://user:password@host:5432/attic?sslmode=require
