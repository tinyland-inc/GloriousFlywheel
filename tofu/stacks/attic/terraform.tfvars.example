# =============================================================================
# Attic Stack - Terraform Variables Example
# =============================================================================
#
# Nix Binary Cache Deployment
#
# Copy this file to a .tfvars file for your environment:
#   cp terraform.tfvars.example dev.tfvars
#   cp terraform.tfvars.example prod.tfvars
#
# Most variables can also be provided via CI/CD, not tfvars files.
# =============================================================================

# [REQUIRED] Kubernetes cluster context
# Examples:
#   - GitLab Agent: "your-org/project/agents:your-cluster"
#   - Kubeconfig:   "my-cluster-context"
cluster_context = "your-org/project/agents:your-cluster"

# Base domain for ingress
# - dev:  dev.example.com
# - prod: prod.example.com
ingress_domain = "dev.example.com"

# Namespace and environment
namespace   = "attic-cache"
environment = "development"

# =============================================================================
# S3 Storage (Required - Set via CI/CD Variables)
# =============================================================================
# These should be set as CI/CD variables, not in tfvars:
#   S3_ENDPOINT           - S3 endpoint URL
#   S3_ACCESS_KEY_ID      - S3 access key (masked)
#   S3_SECRET_ACCESS_KEY  - S3 secret key (masked)
#   S3_BUCKET_NAME        - S3 bucket name
#
# For local testing only:
# s3_endpoint          = "https://s3.example.com"
# s3_bucket_name       = "attic-cache"
# s3_access_key_id     = ""
# s3_secret_access_key = ""

# =============================================================================
# PostgreSQL (CloudNativePG)
# =============================================================================
use_cnpg_postgres = true
pg_instances      = 1          # 1 for dev, 3 for production HA
pg_storage_size   = "5Gi"      # 5Gi for dev, 10Gi for production
pg_storage_class  = "longhorn"

# =============================================================================
# API Server
# =============================================================================
api_min_replicas = 1  # 1 for dev, 2 for production
api_max_replicas = 3  # 3 for dev, 10 for production

# =============================================================================
# Ingress
# =============================================================================
enable_ingress = true
enable_tls     = true
ingress_class  = "traefik"
